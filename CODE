#include<pic.h>
int array[10]={0x40,0x79,0x24,0x30,0x19,0x12,0x02,0x78,0x00,0x10};
int i,add,temp=0;
int num[10];
int sub,mult,div;
void delay(int count) 
{
    while(count--);
}

void main()
{
	TRISC=0x00;  
    PORTC=0x00;
    
    TRISE=0X00;
    PORTE=0X00;
    
    TRISB=0xFF; 
    PORTB=0x00;
    
    TRISD=0x00; 
    PORTD=0x00;
     
    ANSEL=0x00;  
    ANSELH=0x00;
    while(1)
    {
	    RD0=0;RD1=0;RD2=0;RD3=1;
	    if(RB0==1)
	    {
		    RE0=1;RE1=0; 
		    for(i=0;i<=9;)
	    	{
			    RE0=1;RE1=0;
			    RD0=0;RD1=0;RD2=1;RD3=0;
			    if(RB0==1)
			    {
				    PORTC=array[1];
				    num[i]=1;
				    i++;
				    while(RB0==1);
				}
				if(RB1==1)
			    {
				    PORTC=array[2];
				    num[i]=2;
				    i++;
					while(RB1==1);
				}
				if(RB2==1)
			    {
				    PORTC=array[3];
				    num[i]=3;
				    i++;
				    while(RB2==1);
				   
				}	
				RD0=0;RD1=1;RD2=0;RD3=0;
			    if(RB0==1)
			    {
				    PORTC=array[4];
				    num[i]=4;
				    i++;
				    while(RB0==1);
				    
				}
				if(RB1==1)
			    {
				    PORTC=array[5];
				    num[i]=5;
				    i++;
				 	while(RB1==1);
				}
				if(RB2==1)
			    {
				    PORTC=array[6];
				    num[i]=6;
				    i++;
				    while(RB2==1); 
				}	
				RD0=1;RD1=0;RD2=0;RD3=0;
			    if(RB0==1)
			    {
				    
				    PORTC=array[7];
				    num[i]=7;
				    i++;
				    while(RB0==1); 
				}
				if(RB1==1)
			    {
				    PORTC=array[8];
				    num[i]=8;
				    i++;
				    while(RB1==1); 
				}
				if(RB2==1)
			    {
				    PORTC=array[9];
				    num[i]=9;
				    i++;
				    while(RB2==1);
				}   		    
				RD0=0;RD1=0;RD2=0;RD3=1;
				if(RB3==1)
				    {	     
					    add=num[0]+num[1]+num[2];
					    RE0=1;RE1=0;
					    PORTC=array[add/10];
					    delay(9000);
					    RE0=0;RE1=1;
					    PORTC=array[add%10];
					    delay(9000);	    
					}
				RD0=0;RD1=0;RD2=1;RD3=0;
				if(RB3==1)
				    {	     
					    sub=num[0]-num[1]-num[2];
					    RE0=1;RE1=0;
					    PORTC=array[sub/10];
					    delay(9000);
					    RE0=0;RE1=1;
					    PORTC=array[sub%10];
					    delay(9000);
					}
				RD0=0;RD1=1;RD2=0;RD3=0;
				if(RB3==1)
				    {	     
					    temp=num[0]*num[1];
					    mult=temp;
					    RE0=1;RE1=0;
					    PORTC=array[mult/10];
					    delay(9000);
					    RE0=0;RE1=1;
					    PORTC=array[mult%10];
					    delay(9000);
					}
				RD0=1;RD1=0;RD2=0;RD3=0;
				if(RB3==1)
				    {	     
					    temp=num[0]/num[1];
					    div=temp;
					    RE0=1;RE1=0;
					    PORTC=array[div/10];
					    delay(9000);
					    RE0=0;RE1=1;
					    PORTC=array[div%10];
					    delay(9000);
					}
			}
		}
	}
}
